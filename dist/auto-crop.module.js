var t=function(){function t(){}var e=t.prototype;return e.getCroppedImageUrl=function(e,n){var a=this;return void 0===n&&(n=5),new Promise(function(r){var o=new Image;o.onload=function(){r(a.cropImageElement(o,n))},o.onerror=function(){console.error("could not load given image",t.name)},o.crossOrigin="anonymous",o.src=e})},e.cropImage=function(t,e){return void 0===e&&(e=5),t.src=this.cropImageElement(t,e).toString(),t},e.createCanvas=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},e.cropImageElement=function(t,e){if(void 0===e&&(e=5),!t||!t.width||!t.height)throw"[ImageCropService] no valid image given";var n=t.width,a=t.height,r=this.createCanvas(n,a),o=r.getContext("2d");o.drawImage(t,0,0);var i=o.getImageData(0,0,n,a).data,c=!1,g=Infinity,m=Infinity,h=-1,v=-1,u=Math.max(0,e);if(0!=i[3]&&0!=i[i.length-1])return new URL(r.toDataURL());for(var d=0;d<i.length;d+=4*u)if(0!==i[d+3]){c=!0;var f=d/4%n,s=Math.floor(d/4/n);g=Math.min(g,f),m=Math.min(m,s),h=Math.max(h,f),v=Math.max(v,s)}return c&&(o=(r=this.createCanvas(h-g,v-m)).getContext("2d")).drawImage(t,-g,-m,n,a),new URL(r.toDataURL())},t}();export{t as ImageCropService};
//# sourceMappingURL=auto-crop.module.js.map
